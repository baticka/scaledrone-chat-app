{"version":3,"sources":["main.js"],"names":["messageContainer","document","querySelector","membersList","messageForm","messageFormButton","messageInput","members","firstName","lastName","getRandomInt","Math","floor","random","element","getMemberName","length","concat","getMemberColor","drone","Scaledrone","data","name","color","on","error","alert","room","subscribe","member","updateMembers","message","createMessageElement","push","_ref","id","index","findIndex","splice","sendMessage","regExp","RegExp","test","value","publish","addEventListener","getMessageMemberName","nameContainerElParent","querySelectorAll","nameContainerElement","nameContainerParent","nameContainer","nameContainerText","innerText","innerHTML","args","classList","add","forEach","appendChild","createMemberElement","createDiv","createElement","clientData","style","newMember","createInnerDiv","newMessage","createTextNode","append"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"../src","sourcesContent":["/* Global variables */\nconst messageContainer = document.querySelector('.message-container');\nconst membersList = document.querySelector('.members-list');\nconst messageForm = document.querySelector('form');\nconst messageFormButton = document.querySelector('.message-form__button');\n\nlet messageInput = document.querySelector('.message-form__input');\nlet members = [],\n\tfirstName = [\n\t\t'Donald',\n\t\t'Mickey',\n\t\t'Minnie',\n\t\t'Pluto',\n\t\t'Daisy',\n\t\t'Goofy',\n\t\t'Scrooge',\n\t\t'Moby',\n\t],\n\tlastName = [\n\t\t'Duck',\n\t\t'Mouse',\n\t\t'Frog',\n\t\t'McQuack',\n\t\t'Goof',\n\t\t'McDuck',\n\t\t'Vanderquack',\n\t\t'Pistoles',\n\t];\n\nconst getRandomInt = () => {\n\treturn Math.floor(Math.random() * element);\n};\n\n/* Get random name for each member */\nconst getMemberName = () => {\n\telement = firstName.length;\n\treturn `${firstName[getRandomInt()]} ${lastName[getRandomInt()]}`;\n};\n\n/* Get random color for each member name */\nconst getMemberColor = () => {\n\telement = 256;\n\treturn `rgb(${getRandomInt()}, ${getRandomInt()}, ${getRandomInt()})`;\n};\n\nconst drone = new Scaledrone(process.env.SECRET_KEY, {\n\tdata: {\n\t\tname: getMemberName(),\n\t\tcolor: getMemberColor(),\n\t},\n});\n\n/* Start scaledrone and open chat room */\ndrone.on('open', (error) => {\n\tif (error) {\n\t\talert('Something went wrong, try again');\n\t}\n\n\tconst room = drone.subscribe('observable-room');\n\troom.on('open', function (error) {\n\t\tif (error) {\n\t\t\talert('Something went wrong, try again');\n\t\t}\n\t});\n\n\t/* Display list of members in the room across all opent windows */\n\troom.on('members', (member) => {\n\t\tmembers = member;\n\t\tupdateMembers();\n\t});\n\n\t/* Display members + messages respectively on enter or button click */\n\troom.on('message', (message) => {\n\t\tcreateMessageElement(message.data, message.member);\n\t});\n\n\t/* If chat opened in more than 2 windows update array with +1 member for each window */\n\troom.on('member_join', (member) => {\n\t\tmembers.push(member);\n\t\tupdateMembers();\n\t});\n\n\t/* Check if member id exists, if not remove member from chat */\n\troom.on('member_leave', ({ id }) => {\n\t\tconst index = members.findIndex((member) => member.id === id);\n\t\tmembers.splice(index, 1);\n\n\t\tupdateMembers();\n\t});\n});\n\nconst sendMessage = () => {\n\tconst regExp = new RegExp('^[^\\S.*$0-9A-Za-z]+$');\n\tif (regExp.test(messageInput.value)) {\n\t\talert(\n\t\t\t'Type something, blank message is no fun'\n\t\t);\n\t} else {\n\t\tif (messageInput.value) {\n\t\t\t/* observable-room - listen to members join and leave chat */\n\t\t\tdrone.publish({\n\t\t\t\troom: 'observable-room',\n\t\t\t\tmessage: messageInput.value,\n\t\t\t});\n\t\t} else {\n\t\t\talert(\n\t\t\t\t'Type something, blank message is no fun'\n\t\t\t);\n\t\t}\n\t\tmessageInput.value = '';\n\t}\n};\nmessageFormButton.addEventListener('click', sendMessage);\n\n/* Fetch inital assigned member name, compare it with\n\tmemeber who sent a message and if the same add class\n\tto move parent div to the end of the window\n*/\nconst getMessageMemberName = () => {\n\tlet nameContainerElParent = document.querySelectorAll(\n\t\t'.message-container > div'\n\t);\n\tlet nameContainerElement = document.querySelectorAll(\n\t\t'.message-container > div > div:nth-child(1)'\n\t);\n\n\tfor (let index = 0; index < nameContainerElement.length; index++) {\n\t\tconst nameContainerParent = nameContainerElParent[index];\n\t\tconst nameContainer = nameContainerElement[index];\n\t\tconst nameContainerText = nameContainerElement[index].innerText;\n\n\t\tif (nameContainerText) {\n\t\t\tnameContainer.innerHTML == drone.args[1].data.name\n\t\t\t\t? nameContainerParent.classList.add('message-end')\n\t\t\t\t: nameContainerParent.classList.add('message-start');\n\t\t}\n\t}\n};\n\n/* Update members list when new member joins in */\nconst updateMembers = () => {\n\tmembersList.innerHTML = '';\n\tmembers.forEach((member) =>\n\t\tmembersList.appendChild(createMemberElement(member))\n\t);\n};\n\n/* Create new member and assign color to name */\nconst createMemberElement = (member) => {\n\tconst createDiv = document.createElement('div');\n\n\tcreateDiv.innerText = member.clientData.name;\n\tcreateDiv.style.color = member.clientData.color;\n\n\treturn createDiv;\n};\n\n/* Create message block, add member and attach respective messages */\nconst createMessageElement = (data, member) => {\n\tconst newMember = createMemberElement(member),\n\t\tcreateInnerDiv = document.createElement('div'),\n\t\tnewMessage = document.createTextNode(data),\n\t\tcreateDiv = document.createElement('div');\n\n\tcreateInnerDiv.append(newMessage);\n\tcreateDiv.append(newMember, createInnerDiv);\n\tmessageContainer.appendChild(createDiv);\n\n\tgetMessageMemberName();\n};\n"]}